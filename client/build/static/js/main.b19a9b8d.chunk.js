(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{162:function(e,t,n){},183:function(e,t){},184:function(e,t){},185:function(e,t){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),o=(n(162),n(25)),s=n(20),l=n(228),u=n(230),d=n(249),j=n(232),p=n(10),m=n(12),b=n.n(m),f=n(23),h=n(9),x={id:localStorage.getItem("id"),user:{},signinUp:!1,signinIn:!1,error:null,token:localStorage.getItem("token")};var O=n(118),g=n.n(O),v=n(1),y=Object(l.a)((function(e){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"60px",backgroundColor:"#fff",padding:"10px 30px "},logoHeader:{width:"90px"},profile:{display:"flex",justifyContent:"space-around",alignItems:"center",width:"150px"},profileLogo:{fontSize:"40px"},profileLogoLink:{color:"black"},escBtn:{backgroundColor:"black","&:hover":{backgroundColor:"black"},color:"white"}}}));var w=function(){var e=y(),t=Object(p.b)(),n=Object(p.c)((function(e){return e.application.token})),a=Object(p.c)((function(e){return e.application.id}));return Object(v.jsx)(u.a,{position:"static",children:Object(v.jsxs)(d.a,{className:e.header,children:[Object(v.jsx)(j.a,{component:o.b,to:"/",children:Object(v.jsx)("img",{className:e.logoHeader,src:"https://www.iloveimg.com/img/iloveimg.svg",alt:"logo"})}),n?Object(v.jsxs)(d.a,{className:e.profile,children:[Object(v.jsx)(j.a,{className:e.escBtn,variant:"contained",color:"success",onClick:function(){t(function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"application/logout/fullfilled"}),localStorage.clear();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},component:o.b,to:"/",children:"\u0412\u044b\u0439\u0442\u0438"}),Object(v.jsx)(o.b,{className:e.profileLogoLink,to:"/account/".concat(a),children:Object(v.jsx)(g.a,{className:e.profileLogo})})]}):Object(v.jsx)(j.a,{variant:"contained",component:o.b,to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})]})})},k=n(15),C=n(253),S=n(234),N=n(254),I=n(236),T=n(93),A=n.n(T),B=n(235),L=n(233),W=Object(l.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},error:{color:"red",padding:"6px",width:"395px",textAlign:"center"}}}));var z=function(){var e=Object(p.b)(),t=W(),n=Object(s.f)(),r=Object(a.useState)(""),c=Object(k.a)(r,2),i=c[0],l=c[1],u=Object(a.useState)(""),d=Object(k.a)(u,2),m=d[0],h=d[1],x=Object(p.c)((function(e){return e.application.signinIn})),O=Object(p.c)((function(e){return e.application.error})),g=Object(p.c)((function(e){return e.application.token})),y=function(t){t.preventDefault(),e(function(e,t){return function(){var n=Object(f.a)(b.a.mark((function n(a){var r,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"application/signin/pending"}),n.next=3,fetch("/users/login",{method:"POST",body:JSON.stringify({email:e,password:t}),headers:{"Content-type":"application/json"}});case 3:return r=n.sent,n.next=6,r.json();case 6:c=n.sent,console.log(c),c.error?a({type:"application/signin/rejected",error:c.error}):(a({type:"application/signin/fullfilled",payload:{json:c}}),localStorage.setItem("token",c.token),localStorage.setItem("id",c.id));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(i,m))};return g&&n.push("/"),Object(v.jsxs)(L.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(S.a,{}),Object(v.jsxs)("div",{className:t.paper,children:[Object(v.jsx)(C.a,{className:t.avatar,children:Object(v.jsx)(A.a,{})}),Object(v.jsx)(B.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(v.jsxs)("form",{className:t.form,onSubmit:function(e){return y(e)},noValidate:!0,children:[Object(v.jsxs)(I.a,{container:!0,spacing:2,children:[Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{variant:"outlined",required:!0,fullWidth:!0,value:i,label:"Email",name:"email",autoComplete:"email",onChange:function(e){l(e.target.value)}})}),Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{variant:"outlined",required:!0,fullWidth:!0,value:m,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){h(e.target.value)}})})]}),Object(v.jsx)(j.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:y,disabled:x,type:"submit",children:"Sign In"}),Object(v.jsx)(I.a,{container:!0,children:Object(v.jsx)(I.a,{item:!0,xs:!0,children:Object(v.jsx)(o.b,{to:"/sign-up",variant:"body2",children:"Register"})})})]}),Object(v.jsx)(B.a,{component:"p",variant:"p",className:t.error,children:O})]})]})},M=Object(l.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},error:{color:"red",padding:"6px",width:"395px",textAlign:"center"}}}));var P=function(e){var t=Object(p.b)(),n=M(),r=Object(a.useState)(""),c=Object(k.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(""),u=Object(k.a)(l,2),d=u[0],m=u[1],h=Object(a.useState)(""),x=Object(k.a)(h,2),O=x[0],g=x[1],y=Object(a.useState)(""),w=Object(k.a)(y,2),T=w[0],W=w[1],z=Object(p.c)((function(e){return e.application.signinUp})),P=Object(p.c)((function(e){return e.application.error})),R=function(e){e.preventDefault(),t(function(e,t,n,a){return function(){var r=Object(f.a)(b.a.mark((function r(c){var i,o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c({type:"application/signup/pending"}),r.next=3,fetch("/users",{method:"POST",body:JSON.stringify({email:e,password:t,name:n,avatar:a}),headers:{"Content-type":"application/json"}});case 3:return i=r.sent,r.next=6,i.json();case 6:(o=r.sent).error?c({type:"application/signup/rejected",error:o.error}):c({type:"application/signup/fullfilled",payload:o});case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(O,T,i,d))};return Object(v.jsxs)(L.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(S.a,{}),Object(v.jsxs)("div",{className:n.paper,children:[Object(v.jsx)(C.a,{className:n.avatar,children:Object(v.jsx)(A.a,{})}),Object(v.jsx)(B.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(v.jsxs)("form",{className:n.form,onSubmit:R,noValidate:!0,children:[Object(v.jsxs)(I.a,{container:!0,spacing:2,children:[Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{variant:"outlined",required:!0,fullWidth:!0,value:i,label:"Name",name:"name",autoComplete:"name",onChange:function(e){s(e.target.value)}})}),Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{variant:"outlined",required:!0,fullWidth:!0,value:d,label:"Avatar",name:"avatar",autoComplete:"avatar",onChange:function(e){m(e.target.value)}})}),Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{variant:"outlined",required:!0,fullWidth:!0,value:O,label:"Email",name:"email",autoComplete:"email",onChange:function(e){g(e.target.value)}})}),Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsx)(N.a,{variant:"outlined",required:!0,fullWidth:!0,value:T,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){W(e.target.value)}})})]}),Object(v.jsx)(j.a,{fullWidth:!0,type:"submit",variant:"contained",color:"primary",className:n.submit,onClick:R,disabled:z,children:"Sign Up"}),Object(v.jsx)(I.a,{container:!0,children:Object(v.jsx)(I.a,{item:!0,xs:!0,children:Object(v.jsx)(o.b,{to:"/sign-in",variant:"body2",children:"Login"})})})]}),Object(v.jsx)(B.a,{component:"p",variant:"p",className:n.error,children:P})]})]})},R=n(241),D=n(242),E=n(243),F=n(22),U={memes:[],loading:!1};var q=function(e,t){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"memes/fetch/pending"}),a="/memes",e&&(a="/memes?sort=".concat(e)),t.next=6,fetch(a);case 6:return r=t.sent,t.next=9,r.json();case 9:return c=t.sent,t.next=12,n({type:"memes/fetch/fulfilled",payload:c});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),n({type:"memes/fetch/rejected",error:t.t0.toString()});case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},H=function(){return function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"memes/rnd/pending"}),e.next=4,fetch("/memes/rnd");case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.next=10,t({type:"memes/rnd/fulfilled",payload:a});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"memes/rnd/rejected",error:e.t0.toString()});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},J=n(123),_=n.n(J),V=n(122),G=n.n(V),X=n(240),Y=function(){return Object(v.jsx)(d.a,{style:{textAlign:"center",marginTop:"150px"},children:Object(v.jsx)(X.a,{})})},K=n(250),Q=n(255),Z=n(251),$=n(97),ee=n.n($),te=n(94),ne=n.n(te),ae=n(70),re=Object(l.a)({pages:{marginTop:20},page:{border:"solid",borderWidth:1,borderColor:"lightgray",borderRadius:40,padding:10,paddingTop:5,paddingBottom:5,marginRight:10,marginLeft:10,cursor:"pointer"},currentPage:{border:"solid",borderWidth:2,borderColor:"gray",borderRadius:40,padding:10,paddingTop:5,paddingBottom:5,marginRight:10,marginLeft:10,cursor:"pointer"},like:{display:"flex",marginLeft:"auto !important",color:"red"},countLikes:{color:"#171717",fontSize:16},likedIcon:{fontSize:"24px !important"},notLikedIcon:{fontSize:"24px !important",color:"#171717"},imageMem:{position:"relative",width:400,height:450,margin:"auto",lineHeight:100},imageCardMeme:{position:"absolute",margin:"auto",left:0,top:0,bottom:0,right:0}}),ce=function(){var e=Object(p.b)(),t=re();Object(a.useEffect)((function(){e(q())}),[]);var n=Object(p.c)((function(e){return e.application.id})),r=Object(p.c)((function(e){return e.memes.memes})),c=Object(p.c)((function(e){return e.memes.loading})),i=Object(p.c)((function(e){return e.application.token})),s=Object(a.useState)(""),l=Object(k.a)(s,2),u=l[0],m=l[1],h=Object(a.useState)(!1),x=Object(k.a)(h,2),O=x[0],g=x[1],y=function(t){i?e(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/memes/likes/".concat(e),{method:"POST",body:JSON.stringify({idMeme:e}),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).status?n({type:"memes/likeMeme/fulfilled",payload:r}):n({type:"memes/unlikeMeme/fulfilled",payload:r}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:"memes/likeMeme/rejected",error:t.t0.toString()});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(t)):g(!0)},w=r.filter((function(e){if(e.tags.length>0)for(var t=0;t<e.tags.length;t++)if(e.tags[t]&&e.tags[t].toLowerCase().includes(u.toLowerCase()))return e.tags[t].toLowerCase().includes(u.toLowerCase())}));return Object(v.jsxs)(d.a,{sx:{flexGrow:1},style:{marginTop:30},children:[Object(v.jsx)("div",{children:Object(v.jsx)(N.a,{id:"outlined-search",label:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0435\u0433\u0443",type:"search",onChange:function(e){return m(e.target.value)},value:u,variant:"outlined"})}),c?Object(v.jsx)(Y,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{container:!0,spacing:3,children:w.map((function(e){return Object(v.jsx)(I.a,{item:!0,xs:4,children:Object(v.jsxs)(R.a,{sx:{maxWidth:345},className:t.cardMeme,children:[Object(v.jsx)("div",{className:t.imageMem,children:Object(v.jsx)(D.a,{component:"img",alt:e.img,image:e.img,className:t.imageCardMeme})}),Object(v.jsxs)(E.a,{children:[Object(v.jsx)(j.a,{component:o.b,to:"/memes/".concat(e._id),variant:"contained",color:"primary",children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(v.jsx)(j.a,{variant:"contained",color:"default",endIcon:Object(v.jsx)(ne.a,{}),onClick:function(){return t=e.img,void Object(ae.saveAs)("http://localhost:4000/".concat(t),"meme.jpg");var t},children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"}),Object(v.jsx)(j.a,{className:t.like,onClick:function(){return y(e._id)},startIcon:e.likes.find((function(e){return n===e}))?Object(v.jsx)(G.a,{className:t.likedIcon}):Object(v.jsx)(_.a,{className:t.notLikedIcon}),children:Object(v.jsx)("span",{className:t.countLikes,children:e.likes.length})})]})]})})}))}),O?Object(v.jsx)(Q.a,{sx:{width:"30%",position:"fixed",top:"20%",left:"470px"},spacing:2,children:Object(v.jsx)(K.a,{action:Object(v.jsx)(Z.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){g(!1)},children:Object(v.jsx)(ee.a,{fontSize:"inherit"})}),severity:"error",children:"\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043d\u0443\u0436\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}):Object(v.jsx)(v.Fragment,{})]})]})},ie=n(257),oe=n(258),se=n(239),le=n(248),ue=function(){var e=Object(a.useState)("\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"),t=Object(k.a)(e,2),n=t[0],r=t[1],c=Object(p.b)();return Object(a.useEffect)((function(){c(q(n))}),[n]),Object(v.jsx)("div",{children:Object(v.jsxs)(se.a,{required:!0,sx:{m:1,minWidth:120},style:{width:220},children:[Object(v.jsx)(ie.a,{id:"demo-simple-select-required-label",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(v.jsxs)(le.a,{labelId:"demo-simple-select-required-label",id:"demo-simple-select-required",value:n,label:"Age *",onChange:function(e){return r(e.target.value)},children:[Object(v.jsx)(oe.a,{value:"",children:Object(v.jsx)("em",{children:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e"})}),Object(v.jsx)(oe.a,{value:"new",children:"\u041f\u043e \u0434\u0430\u0442\u0435"}),Object(v.jsx)(oe.a,{value:"popular",children:"\u041f\u043e \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0441\u0442\u0438"})]})]})})},de=n(124),je=n.n(de),pe=function(){return Object(v.jsx)(j.a,{variant:"contained",component:o.b,to:"/create-meme",color:"primary",endIcon:Object(v.jsx)(je.a,{}),children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u041c\u0435\u043c"})},me=n(125),be=n.n(me),fe=Object(l.a)({buttonsBox:{display:"flex",justifyContent:"space-between",width:"30%",height:40}}),he=function(e){var t=e.currentPage,n=fe();return Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)(ue,{currentPage:t}),Object(v.jsxs)(d.a,{className:n.buttonsBox,children:[Object(v.jsx)(j.a,{color:"secondary",variant:"contained",component:o.b,to:"/randomMeme",endIcon:Object(v.jsx)(be.a,{}),children:"\u0420\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u043c\u0435\u043c"}),Object(v.jsx)(pe,{})]})]})},xe=function(){var e=Object(p.c)((function(e){return e.memes.currentPage}));return Object(v.jsxs)("div",{style:{padding:30},children:[Object(v.jsx)(he,{currentPage:e}),Object(v.jsx)(ce,{currentPage:e})]})},Oe=n(126),ge=n.n(Oe),ve=n(127),ye=n.n(ve),we=n(128),ke=n.n(we),Ce=n(129),Se=n.n(Ce),Ne=Object(l.a)((function(e){return{profile:{paddingLeft:"25px",textAlign:"center"},inp:{display:"none"},avatar:{marginTop:"15px",borderRadius:"50%",width:"155px",height:"155px"},delBtn:{backgroundColor:"transparent",border:"none"},name:{fontSize:"20px",fontFamily:"sans-serif",border:"1px solid black",display:"inline-block",padding:"0px 7px",borderRadius:"5px"},title:{fontSize:"42px",letterSpacing:"0",fontWeight:"600",color:"#383e45",marginBottom:"8px",lineHeight:"46px",maxWidth:"800px",marginLeft:"auto",marginRight:"auto",marginTop:"10px",textAlign:"center"},btnCont:{display:"flex",justifyContent:"space-between"}}}));var Ie=function(){var e=Ne(),t=Object(p.b)(),n=Object(s.g)().id,r=Object(p.c)((function(e){return e.application.user})),c=Object(p.c)((function(e){return e.memes.memes})),i=Object(p.c)((function(e){return e.memes.loading}));Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"application/getUser/pending"}),t.next=3,fetch("/users/".concat(e));case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).error?n({type:"application/getUser/rejected",error:r.error}):n({type:"application/getUser/fullfilled",payload:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(n))}),[]),Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"memes/getByAuthor/pending"}),a="/memes/".concat(e),t.next=5,fetch(a);case 5:return r=t.sent,t.next=8,r.json();case 8:return c=t.sent,t.next=11,n({type:"memes/getByAuthor/fulfilled",payload:c});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),n({type:"memes/getByAuthor/rejected",error:t.t0.toString()});case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()}(n))}),[]);var o=function(e){var n=e.target.files[0];t(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(a=new FormData).append("file",e),t.next=5,fetch("/users/avatar",{method:"POST",body:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 5:return r=t.sent,t.next=8,r.json();case 8:c=t.sent,n({type:"application/uploadAvatar/fullfilled",payload:c}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(n)),e.target.value=""};return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(I.a,{container:!0,children:[Object(v.jsxs)(I.a,{className:e.profile,item:!0,xs:"2",children:[Object(v.jsx)(I.a,{item:!0,children:r.avatar?Object(v.jsx)("img",{className:e.avatar,src:"http://localhost:4000/".concat(r.avatar),alt:"avatar",loading:"lazy"}):Object(v.jsx)("img",{className:e.avatar,width:"155px",src:"https://thumbs.dreamstime.com/b/default-avatar-profile-vector-user-profile-default-avatar-profile-vector-user-profile-profile-179376714.jpg",alt:"avatar",loading:"lazy"})}),Object(v.jsxs)(I.a,{item:!0,children:[Object(v.jsx)("label",{for:"inp",children:Object(v.jsx)(ge.a,{})}),Object(v.jsx)("input",{id:"inp",className:e.inp,accept:"image/*",onChange:function(e){return o(e)},type:"file",placeholder:"\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(v.jsx)("button",{className:e.delBtn,onClick:function(){return t(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/users/avatar",{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return n=e.sent,e.next=6,n.json();case 6:e.sent,t({type:"application/uploadAvatar/fullfilled"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())},children:Object(v.jsx)(ye.a,{})})]}),Object(v.jsx)(I.a,{item:!0,children:Object(v.jsx)(B.a,{className:e.name,component:"h4",children:r.name})})]}),Object(v.jsxs)(I.a,{item:!0,xs:"9",children:[Object(v.jsx)(B.a,{component:"h1",variant:"h4",className:e.title,children:"\u041c\u043e\u0438 \u043c\u0435\u043c\u044b"}),i?Object(v.jsx)(Y,{}):Object(v.jsx)(I.a,{container:!0,spacing:3,children:c.map((function(t){return Object(v.jsx)(I.a,{item:!0,xs:3,children:Object(v.jsxs)(R.a,{sx:{maxWidth:345},children:[Object(v.jsx)(D.a,{component:"img",alt:"green iguana",image:"http://localhost:4000/".concat(t.img)}),Object(v.jsxs)(E.a,{className:e.btnCont,children:[Object(v.jsx)(j.a,{variant:"secondary",color:"secondary",onClick:function(){return e=t.img,void Object(ae.saveAs)("http://localhost:4000/".concat(e),"meme.jpg");var e},children:Object(v.jsx)(ke.a,{style:{color:"black"}})}),Object(v.jsx)(j.a,{variant:"secondary",color:"secondary",children:Object(v.jsx)(Se.a,{})})]})]})})}))})]})]})})},Te=n(134),Ae=n(247),Be={loading:!1,items:[],error:null,template:null};var Le=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.templates.loading})),n=Object(p.c)((function(e){return e.templates.items}));Object(a.useEffect)((function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"templates/fetch/pending"}),e.next=3,fetch("/templates");case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).error?t({type:"templates/fetch/rejected",payload:a.error}):t({type:"templates/fetch/fulfilled",payload:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);return t?Object(v.jsx)(X.a,{}):0===n.length?Object(v.jsx)(B.a,{children:"\u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0430"}):Object(v.jsx)(I.a,{container:!0,spacing:4,children:n.map((function(t){return Object(v.jsx)(I.a,{item:!0,xs:12,sm:6,md:3,lg:4,children:Object(v.jsx)(Te.a,{children:Object(v.jsxs)(R.a,{children:[Object(v.jsx)(D.a,{component:"img",image:t.img,alt:"item"}),Object(v.jsx)(Ae.a,{children:Object(v.jsx)(B.a,{variant:"body2",color:"text.secondary",children:t.tags.map((function(e){return"#"+e+" "}))})}),Object(v.jsx)(E.a,{children:Object(v.jsx)(j.a,{onClick:function(){e(function(e){return function(t){t({type:"templates/selectTemplate",payload:e})}}(t))},color:"primary",variant:"contained",size:"medium",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})})]})})})}))})},We=n(130),ze=n.n(We),Me=Object(l.a)({container:{padding:40},templateWrapper:{width:400,height:400,background:"#e5e5e5",display:"flex",justifyContent:"center",alignItems:"center"},canvas:{display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto",width:"80%",height:500,background:"#e5e5e5",borderRadius:4,boxShadow:"0 .5rem 1rem rgba(0, 0, 0, .15)"},tools:{display:"flex",flexDirection:"column",justifyContent:"space-between"},toolsHeader:{height:100,display:"flex",flexDirection:"column",justifyContent:"space-between"},toolsFooter:{display:"flex",justifyContent:"space-between"},white:{margin:"0 5px",padding:0,width:36,height:36,background:"white",border:"none",boxShadow:"0 0 2px rgba(0,0,0,.25)",borderRadius:4,cursor:"pointer"},black:{margin:"0 5px",padding:0,width:36,height:36,background:"black",border:"none",boxShadow:"0 0 2px rgba(0,0,0,.25)",borderRadius:4,cursor:"pointer"},addTextBox:{display:"flex",justifyContent:"space-between"}}),Pe=function(){var e=Me(),t=Object(p.b)(),r=Object(a.useRef)(null),c=Object(p.c)((function(e){return e.templates.template}));Object(a.useEffect)((function(){var e=n(177);r.current=new e(document.querySelector("#canvas"),{cssMaxWidth:700,cssMaxHeight:500,selectionStyle:{cornerSize:20,rotatingPointOffset:70}}),r.current.startDrawingMode("TEXT")}),[]),Object(a.useEffect)((function(){Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.current.loadImageFromURL(null===c||void 0===c?void 0:c.img,"lena").then((function(e){console.log("old : "+e.oldWidth+", "+e.oldHeight),console.log("new : "+e.newWidth+", "+e.newHeight)}));case 2:case"end":return e.stop()}}),e)})))()}),[c]);var i=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.current.on("addText",(function(e){var t=e.originPosition;r.current.addText("",{styles:{fill:"white",textAlign:"center",fontStyle:"bold",fontFamily:"Impact",stroke:"black"},position:t})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)(I.a,{container:!0,spacing:4,className:e.container,children:[Object(v.jsx)(I.a,{item:!0,xs:8,children:Object(v.jsx)("div",{id:"canvas",className:e.canvas})}),Object(v.jsxs)(I.a,{item:!0,xs:4,className:e.tools,children:[Object(v.jsxs)(d.a,{className:e.toolsHeader,children:[Object(v.jsx)(d.a,{className:e.addTextBox,children:Object(v.jsx)(j.a,{variant:"contained",onClick:i,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442"})}),Object(v.jsx)(j.a,{disabled:!0,variant:"contained",endIcon:Object(v.jsx)(ze.a,{}),children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0432\u043e\u044e \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"})]}),Object(v.jsxs)(d.a,{className:e.toolsFooter,children:[Object(v.jsx)(j.a,{endIcon:Object(v.jsx)(ne.a,{}),color:"secondary",variant:"contained",onClick:function(){Object(ae.saveAs)(r.current.toDataURL())},children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"}),Object(v.jsx)(j.a,{color:"primary",variant:"contained",onClick:function(){t(function(e,t){return function(){var n=Object(f.a)(b.a.mark((function n(a){var r,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"memes/add-meme/pending"}),n.next=3,fetch("/memes",{method:"POST",body:JSON.stringify({file:e,template:t}),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 3:r=n.sent,(c=r.json()).error?a({type:"memes/add-meme/rejected",payload:c.error}):a({type:"memes/add-meme/fulfilled",payload:c});case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r.current.toDataURL(),c))},children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})]})]})},Re=Object(l.a)({container:{marginTop:40,display:"flex",justifyContent:"center"}}),De=function(){var e=Re();return Object(v.jsx)(I.a,{container:!0,className:e.container,children:Object(v.jsx)(Pe,{})})},Ee=Object(l.a)({templatesBox:{marginTop:60}}),Fe=function(){var e=Ee();return Object(v.jsxs)("div",{children:[Object(v.jsx)(d.a,{children:Object(v.jsx)(De,{})}),Object(v.jsxs)(d.a,{className:e.templatesBox,children:[Object(v.jsx)(B.a,{align:"center",component:"h1",variant:"h4",gutterBottom:!0,children:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b"}),Object(v.jsx)(d.a,{children:Object(v.jsx)(Le,{})})]})]})},Ue={comments:[],loading:!1};var qe=function(e){var t=Object(p.b)(),n=Object(p.c)((function(e){return e.memes.memes})),r=Object(p.c)((function(e){return e.comments.comments})),c=Object(p.c)((function(e){return e.comments.loading})),i=Object(p.c)((function(e){return e.application.token})),o=Object(s.g)().id,l=Object(a.useState)(null),u=Object(k.a)(l,2),m=u[0],h=u[1],x=Object(a.useState)(!1),O=Object(k.a)(x,2),g=O[0],y=O[1];Object(a.useEffect)((function(){t(q())}),[]),Object(a.useEffect)((function(){t(function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"comments/fetch/pending"}),e.next=4,fetch("/comments");case 4:return n=e.sent,e.next=7,n.json();case 7:return a=e.sent,e.next=10,t({type:"comments/fetch/fulfilled",payload:a});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"comments/fetch/rejected",error:e.t0.toString()});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[t]);var w=n.find((function(e){return o===e._id}));console.log(w,"find");var S=r.filter((function(e){return e.memeId===o}));return w?Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(Y,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(I.a,{container:!0,children:Object(v.jsx)(I.a,{item:!0,xs:5,children:Object(v.jsx)(d.a,{style:{padding:"20px 20px"},children:Object(v.jsx)(D.a,{component:"img",src:"http://localhost:4000/".concat(w.img),alt:w.img})})})}),Object(v.jsxs)("div",{style:{padding:14},className:"App",children:[Object(v.jsx)("h1",{style:{display:"flex",justifyContent:"center"},children:"Comments"}),Object(v.jsx)(I.a,{container:!0,children:Object(v.jsx)(I.a,{item:!0,xs:12,children:Object(v.jsxs)(d.a,{style:{display:"flex",alignItems:"end"},component:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),i?t(function(e,t){return function(){var n=Object(f.a)(b.a.mark((function n(a){var r,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("/comments/memes/".concat(e),{method:"POST",body:JSON.stringify({text:t}),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 3:return r=n.sent,n.next=6,r.json();case 6:return c=n.sent,n.next=9,a({type:"comments/create/fulfilled",payload:c});case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:"comments/create/rejected",error:n.t0.toString()});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(o,m)):y(!0)},children:[Object(v.jsx)(N.a,{id:"outlined-multiline-static",label:"Text",multiline:!0,rows:4,variant:"outlined",style:{width:"700px"},value:m,onChange:function(e){return h(e.target.value)}}),Object(v.jsx)(j.a,{type:"submit",style:{marginLeft:"10px"},variant:"outlined",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})})}),g?Object(v.jsx)(Q.a,{sx:{width:"30%",position:"fixed",top:"20%",left:"470px"},spacing:2,children:Object(v.jsx)(K.a,{action:Object(v.jsx)(Z.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){y(!1)},children:Object(v.jsx)(ee.a,{fontSize:"inherit"})}),severity:"error",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u043d\u0430 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})}):Object(v.jsx)(v.Fragment,{}),S.map((function(e){return Object(v.jsx)(Te.a,{style:{padding:"40px 20px",marginTop:25},children:Object(v.jsxs)(I.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(v.jsx)(I.a,{item:!0,children:Object(v.jsx)(C.a,{alt:"Remy Sharp",src:"http://localhost:4000/".concat(e.userId.avatar)})}),Object(v.jsxs)(I.a,{justifyContent:"left",item:!0,xs:!0,zeroMinWidth:!0,children:[Object(v.jsx)("h4",{style:{margin:0,textAlign:"left"},children:e.userId.name}),Object(v.jsx)("p",{style:{textAlign:"left"},children:e.text}),Object(v.jsxs)("p",{style:{textAlign:"left",color:"gray"},children:[new Date(e.createdAt).getDate(),".",new Date(e.createdAt).getMonth(),".",new Date(e.createdAt).getYear()-100]})]})]})})}))]})]})}):Object(v.jsx)(v.Fragment,{})};var He=function(e){var t=Object(p.b)(),n=Object(p.c)((function(e){return e.memes.memes}));return Object(a.useEffect)((function(){t(H())}),[]),Object(v.jsxs)(d.a,{children:[Object(v.jsx)(I.a,{container:!0,spacing:3,children:Object(v.jsx)(I.a,{item:!0,xs:3,children:Object(v.jsxs)(R.a,{sx:{maxWidth:345},children:[Object(v.jsx)(D.a,{component:"img",alt:"green iguana",image:n[0].img}),Object(v.jsx)(E.a,{})]})})}),Object(v.jsx)(j.a,{onClick:function(){return t(H())},variant:"contained",children:"\u0415\u0449\u0435"})]})},Je=function(){return Object(v.jsxs)(o.a,{children:[Object(v.jsx)(w,{}),Object(v.jsxs)(s.c,{children:[Object(v.jsx)(s.a,{exact:!0,path:"/",children:Object(v.jsx)(xe,{})}),Object(v.jsx)(s.a,{path:"/create-meme",children:Object(v.jsx)(Fe,{})}),Object(v.jsx)(s.a,{path:"/sign-in",children:Object(v.jsx)(z,{})}),Object(v.jsx)(s.a,{path:"/sign-up",children:Object(v.jsx)(P,{})}),Object(v.jsx)(s.a,{path:"/account/:id",children:Object(v.jsx)(Ie,{})}),Object(v.jsx)(s.a,{path:"/memes/:id",children:Object(v.jsx)(qe,{})}),Object(v.jsx)(s.a,{path:"/RandomMeme",children:Object(v.jsx)(He,{})})]})]})},_e=n(85),Ve=n(131),Ge=n(132),Xe=Object(_e.createStore)(Object(_e.combineReducers)({memes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"memes/fetch/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{memes:t.payload,loading:!1});case"memes/fetch/pending":case"memes/getByAuthor/pending":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"memes/getByAuthor/fulfilled":return{state:e,memes:t.payload,loading:!1};case"setCurrentPage/fetch/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{currentPage:t.payload});case"memes/likeMeme/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{memes:e.memes.map((function(e){return t.payload.memeId===e._id?Object(h.a)(Object(h.a)({},e),{},{likes:[].concat(Object(F.a)(e.likes),[localStorage.getItem("id")])}):e}))});case"memes/unlikeMeme/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{memes:e.memes.map((function(e){return t.payload.memeId===e._id?Object(h.a)(Object(h.a)({},e),{},{likes:e.likes.filter((function(e){return e!==localStorage.getItem("id")}))}):e}))});case"memes/rnd/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{memes:[t.payload]});case"memes/add-meme/pending":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"memes/add-meme/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,memes:[].concat(Object(F.a)(e.memes),[t.payload])});case"memes/add-meme/rejected":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.payload});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"application/signup/pending":return Object(h.a)(Object(h.a)({},e),{},{signinUp:!0,error:null});case"application/signup/fullfilled":return Object(h.a)(Object(h.a)({},e),{},{signinUp:!1});case"application/signup/rejected":return Object(h.a)(Object(h.a)({},e),{},{signinUp:!1,error:t.error});case"application/signin/pending":return Object(h.a)(Object(h.a)({},e),{},{signinIn:!0,error:null});case"application/signin/fullfilled":return Object(h.a)(Object(h.a)({},e),{},{signinIn:!1,token:t.payload.json.token,id:t.payload.json.id});case"application/signin/rejected":return Object(h.a)(Object(h.a)({},e),{},{signinIn:!1,error:t.error});case"application/logout/fullfilled":return Object(h.a)(Object(h.a)({},e),{},{user:{},token:null,id:null});case"application/getUser/fullfilled":return Object(h.a)(Object(h.a)({},e),{},{user:t.payload});case"application/uploadAvatar/fullfilled":return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},{avatar:t.payload})});default:return e}},templates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"templates/fetch/pending":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"templates/fetch/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,items:t.payload});case"templates/fetch/rejected":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,error:t.error});case"templates/selectTemplate":return Object(h.a)(Object(h.a)({},e),{},{loading:!1,template:t.payload});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"comments/fetch/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{comments:t.payload,loading:!1});case"comments/fetch/pending":return Object(h.a)(Object(h.a)({},e),{},{loading:!0});case"comments/create/fulfilled":return Object(h.a)(Object(h.a)({},e),{},{comments:[t.payload].concat(Object(F.a)(e.comments))});default:return e}}}),Object(Ge.composeWithDevTools)(Object(_e.applyMiddleware)(Ve.a)));i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(p.a,{store:Xe,children:Object(v.jsx)(Je,{})})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.b19a9b8d.chunk.js.map